<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoComet DAW - Rider Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üöó GoComet DAW - Rider</h1>
            <p class="subtitle">Request and Track Your Rides</p>
            <nav style="margin-top: 10px;">
                <a href="/" style="margin-right: 15px; color: #007bff;">Home</a>
                <a href="/driver.html" style="color: #007bff;">Driver Dashboard</a>
            </nav>
        </header>

        <div class="main-content">
            <!-- Ride Request Section -->
            <section class="card" id="rideRequestSection">
                <h2>Request a Ride</h2>
                <form id="rideForm">
                    <div class="form-group">
                        <label for="riderId">Rider ID:</label>
                        <input type="text" id="riderId" value="RIDER-1" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="pickupLat">Pickup Latitude:</label>
                            <input type="number" id="pickupLat" value="28.7041" step="0.0001" required>
                        </div>
                        <div class="form-group">
                            <label for="pickupLng">Pickup Longitude:</label>
                            <input type="number" id="pickupLng" value="77.1025" step="0.0001" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="destLat">Destination Latitude:</label>
                            <input type="number" id="destLat" value="28.5355" step="0.0001" required>
                        </div>
                        <div class="form-group">
                            <label for="destLng">Destination Longitude:</label>
                            <input type="number" id="destLng" value="77.3910" step="0.0001" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tier">Ride Tier:</label>
                            <select id="tier" required>
                                <option value="ECONOMY">Economy</option>
                                <option value="PREMIUM">Premium</option>
                                <option value="LUXURY">Luxury</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="paymentMethod">Payment Method:</label>
                            <select id="paymentMethod" required>
                                <option value="CASH">Cash</option>
                                <option value="CARD">Card</option>
                                <option value="UPI">UPI</option>
                                <option value="WALLET">Wallet</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Request Ride</button>
                </form>
            </section>

            <!-- Ride Status Section -->
            <section class="card" id="rideStatusSection" style="display: none;">
                <h2>Ride Status</h2>
                <div id="rideStatus">
                    <div class="status-info">
                        <div class="status-item">
                            <span class="label">Ride ID:</span>
                            <span class="value" id="statusRideId">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Status:</span>
                            <span class="value status-badge" id="statusStatus">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Driver ID:</span>
                            <span class="value" id="statusDriverId">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Trip ID:</span>
                            <span class="value" id="statusTripId">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Created At:</span>
                            <span class="value" id="statusCreatedAt">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Matched At:</span>
                            <span class="value" id="statusMatchedAt">-</span>
                        </div>
                    </div>
                    
                    <!-- Ride ID Display (for manual copying) -->
                    <div id="rideIdCopySection" style="margin-top: 15px; padding: 15px; background: #e3f2fd; border-radius: 5px; border: 2px solid #2196f3;">
                        <p style="margin-bottom: 10px; color: #1976d2; font-weight: bold; font-size: 1.1em;">
                            üìã <strong>Driver Matched!</strong> Copy this Ride ID and give it to the driver:
                        </p>
                        <input type="text" id="rideIdToCopy" readonly 
                            style="width: 100%; padding: 10px; border: 2px solid #2196f3; border-radius: 4px; font-family: monospace; font-size: 1.2em; background: white; font-weight: bold; color: #1976d2; cursor: text;" 
                            value="">
                        <p style="margin-top: 10px; color: #666; font-size: 0.9em;">
                            ‚ö†Ô∏è <strong>Important:</strong> Select and copy the Ride ID above (Ctrl+C or Cmd+C), then give it to the driver to accept in the Driver Dashboard.
                        </p>
                    </div>
                    
                    <!-- Payment Section (shown when trip is completed) -->
                    <div id="paymentSection" style="display: none; margin-top: 15px;">
                        <div class="status-item" style="background: #e8f5e9; padding: 15px; border-radius: 5px; border: 2px solid #4caf50;">
                            <div style="margin-bottom: 10px;">
                                <strong style="font-size: 1.2em; color: #2e7d32;">‚úÖ Trip Completed!</strong>
                            </div>
                            <div class="status-item" style="margin-bottom: 15px;">
                                <span class="label" style="font-weight: bold;">Total Fare:</span>
                                <span class="value" id="tripFare" style="font-size: 1.5em; color: #2e7d32; font-weight: bold;">-</span>
                            </div>
                            <button class="btn btn-primary" onclick="processPayment()" id="payBtn" style="margin-top: 10px; width: 100%; padding: 12px; font-size: 1.1em; font-weight: bold;">üí≥ Pay Now</button>
                            <p style="margin-top: 10px; color: #666; font-size: 0.9em; text-align: center;">
                                Click "Pay Now" to complete your payment
                            </p>
                        </div>
                    </div>
                    
                    <!-- Payment Success Section (shown after successful payment) -->
                    <div id="paymentSuccessSection" style="display: none; margin-top: 15px;">
                        <div class="status-item" style="background: #d4edda; padding: 15px; border-radius: 5px; border: 2px solid #28a745;">
                            <div style="margin-bottom: 10px; text-align: center;">
                                <strong style="font-size: 1.3em; color: #155724;">‚úÖ Payment Successful!</strong>
                            </div>
                            <div class="status-item" style="margin-bottom: 10px;">
                                <span class="label" style="font-weight: bold;">Amount Paid:</span>
                                <span class="value" id="paidAmount" style="font-size: 1.3em; color: #155724; font-weight: bold;">-</span>
                            </div>
                            <div class="status-item" style="margin-bottom: 10px;">
                                <span class="label" style="font-weight: bold;">Transaction ID:</span>
                                <span class="value" id="transactionId" style="font-family: monospace; color: #155724;">-</span>
                            </div>
                            <p style="margin-top: 15px; color: #155724; font-size: 0.95em; text-align: center; font-weight: bold;">
                                üéâ Thank you for using GoComet DAW!
                            </p>
                            <button class="btn btn-primary" onclick="clearOldRideInfo()" style="margin-top: 15px; width: 100%; padding: 10px; font-size: 1em;">
                                üöó Request New Ride
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Active Rides Section -->
            <section class="card">
                <h2>üöó All Active Rides</h2>
                <div id="activeRidesContainer">
                    <p style="color: #666; text-align: center;">Loading active rides...</p>
                </div>
            </section>

            <!-- Messages Section -->
            <section class="card">
                <h2>Activity Log</h2>
                <div id="messages" class="messages"></div>
            </section>
        </div>
    </div>

    <script src="rider.js"></script>
</body>
</html>

